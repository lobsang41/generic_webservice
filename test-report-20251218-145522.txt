============================================
API Testing Report
Date: Thu Dec 18 14:55:22 -05 2025
API URL: http://localhost:3000
============================================

=== HEALTH CHECKS ===
[PASS] Health Check - All services UP
  Details: MySQL: up, Cache: up

[PASS] Root endpoint

[FAIL] Metrics endpoint

=== AUTHENTICATION - LOGIN ===
[PASS] Login with valid credentials
  Details: Token received, User ID: admin-default-001

[PASS] Login with invalid credentials (should fail)

[PASS] Login without email (should fail)

=== AUTHENTICATION - ME ===
[PASS] Get current user with valid token
  Details: Email: null

[PASS] Get current user without token (should fail)

[PASS] Get current user with invalid token (should fail)

=== AUTHENTICATION - REGISTER ===
[FAIL] Register new user
  Details: Expected 201, got 429|{"success":false,"error":{"message":"Too many attempts. Please try again in 15 minutes","statusCode":429,"stack":"Error: Too many attempts. Please try again in 15 minutes\n    at Object.handler (/app/dist/shared/middleware/rateLimiter.js:76:15)\n    at /app/node_modules/express-rate-limit/dist/index.cjs:804:16\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /app/node_modules/express-rate-limit/dist/index.cjs:691:5","isOperational":true}}

[FAIL] Register with duplicate email (should fail)

[FAIL] Register without required fields (should fail)

=== USERS - LIST ===
[FAIL] List users with admin token
  Details: Expected 200, got 500|{"success":false,"error":{"message":"Internal server error","statusCode":500,"stack":"Error: Incorrect arguments to mysqld_stmt_execute\n    at PromisePool.execute (/app/node_modules/mysql2/lib/promise/pool.js:54:22)\n    at MySQLDatabase.query (/app/dist/shared/database/mysql.js:61:44)\n    at PostgreSQLCompatibilityWrapper.query (/app/dist/shared/database/postgres.js:27:44)\n    at /app/dist/services/api-gateway/routes/users.js:15:45\n    at /app/dist/shared/middleware/errorHandler.js:122:25\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at /app/dist/shared/middleware/auth.js:102:9\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)","isOperational":false}}

[PASS] List users without authentication (should fail)

=== USERS - GET BY ID ===
[PASS] Get user by ID
  Details: User: null

[PASS] Get user with non-existent ID (should fail)

=== AUTHENTICATION - REFRESH TOKEN ===
[PASS] Refresh token with valid token
  Details: New access token received

[PASS] Refresh token with invalid token (should fail)


============================================
TEST SUMMARY
============================================
Total Tests: 18
[0;32mPassed: 13[0m
[0;31mFailed: 5[0m
[1;33mâš  Some tests failed[0m
Success Rate: 72%
============================================

Report saved to: test-report-20251218-145522.txt
